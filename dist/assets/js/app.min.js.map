{"version":3,"sources":["app.js"],"names":["console","log","$","tooltip","addedKBmaps","Map","name","this","mapMarkers","maxZindex","openedModals","container","jQuery","mapDataJSON","addMarker","icon","cordX","cordY","markerName","generateUniqueMarkerName","MapMarker","removeMarker","mapMarker","importJSON","importedMarkerName","title","content","addModal","generateJSON","showAllMapMarkers","show","closeAllModals","i","length","closeModal","map","markerContainer","modal","modalTitle","modalContent","MarkerModal","activate","addClass","deactivate","removeClass","setCurrent","css","unsetCurrent","generateMarker","output","location","remove","removeElement","append","linkedMapMarker","positionedElemOffsetX","positionedElemOffsetY","self","generateModal","isModalActive","hasClass","openModal","push","clearPosition","toggleModal","$markerContentWidth","find","outerWidth","$markerContentHeight","outerHeight","window","$markerWidth","$markerHeight","$positionedElem","left","top","max-width","offset","bottom","whileOffScreen","generateName","namebase","Math","floor","random","objname","infiniteLoopCheck","error","getKBmap","iLen","createKBmap","mapsrc","Array","prototype","elem","index","indexOf","splice","document","ready","resize","forEach","on","clickedMarkerName","parent","attr","clickedMarkerMapName","event","trigger","stopPropagation","mapMarkerParent"],"mappings":"AAAAA,QAAAC,IAAA,aACAC,EAAA,WACAA,EAAA,2BAAAC,YAIA,IAAAC,YAAA,GAEA,SAAAC,IAAAC,GAGAC,KAAAD,KAAAA,EACAC,KAAAC,WAAA,GACAD,KAAAE,UAAA,EACAF,KAAAG,aAAA,GACAH,KAAAI,UAAAC,OAAA,IAAAL,KAAAD,KAAA,2CACAC,KAAAM,YAEAN,KAAAO,UAAA,SAAAC,EAAAC,EAAAC,EAAAX,GAEA,IAAAY,EAKAA,OAFA,IAAAZ,EAEAa,yBAAAZ,KAAAD,GAIAa,yBAAAZ,MAIAA,KAAAC,WAAAU,GAAA,IAAAE,UAAAF,EAAAH,EAAAC,EAAAC,EAAAV,OAIAA,KAAAc,aAAA,SAAAC,GACAf,KAAAC,WAAAc,GAAAD,gBAGAd,KAAAgB,WAAA,SAAAV,GAIA,IAAAW,sBAFAjB,KAAAM,YAAAA,EAEAN,KAAAM,YAGAN,KAAAO,UAAAP,KAAAM,YAAAW,oBAAAT,KAAAR,KAAAM,YAAAW,oBAAAR,MAAAT,KAAAM,YAAAW,oBAAAP,MAAAO,oBAGAjB,KAAAM,YAAAW,oBAAA,OAAAjB,KAAAM,YAAAW,oBAAA,MAAAC,OAAAlB,KAAAM,YAAAW,oBAAA,MAAAE,SAEAnB,KAAAC,WAAAgB,oBAAAG,SAAApB,KAAAM,YAAAW,oBAAA,MAAAC,MAAAlB,KAAAM,YAAAW,oBAAA,MAAAE,UAOAnB,KAAAqB,aAAA,aAIArB,KAAAsB,kBAAA,WAIA,IAAAP,aAAAf,KAAAC,WAEA,iBAAAc,WAEAf,KAAAC,WAAAc,WAAAQ,QAQAvB,KAAAwB,eAAA,WACA,IAAA,IAAAC,EAAAzB,KAAAG,aAAAuB,OAAA,EAAA,GAAAD,EAAAA,IACAzB,KAAAG,aAAAsB,GAAAE,cAMA,SAAAd,UAAAd,EAAAS,EAAAC,EAAAC,EAAAkB,GAEA5B,KAAA4B,IAAAA,EACA5B,KAAAD,KAAAA,EACAC,KAAAQ,KAAAA,EACAR,KAAAS,MAAAA,EACAT,KAAAU,MAAAA,EACAV,KAAA6B,gBAAA7B,KAAA4B,IAAAxB,UACAJ,KAAA8B,MAEA9B,KAAAoB,SAAA,SAAAW,EAAAC,GACAhC,KAAA8B,MAAA,IAAAG,YAAAF,EAAAC,EAAAhC,OAGAA,KAAAkC,SAAA,WACA7B,OAAA,sBAAAL,KAAAD,KAAA,MAAAoC,SAAA,WAGAnC,KAAAoC,WAAA,WACA/B,OAAA,sBAAAL,KAAAD,KAAA,MAAAsC,YAAA,WAGArC,KAAAsC,WAAA,WACAjC,OAAA,sBAAAL,KAAAD,KAAA,MAAAwC,IAAA,UAAAvC,KAAA4B,IAAA1B,WACAF,KAAA4B,IAAA1B,aAGAF,KAAAwC,aAAA,WACAnC,OAAA,sBAAAL,KAAAD,KAAA,MAAAwC,IAAA,UAAA,MAGAvC,KAAAyC,eAAA,WAGA,OAFAC,OAAA,gDAAA1C,KAAAD,KAAA,kBAAAC,KAAAS,MAAA,WAAAT,KAAAU,MAAA,gBAAAV,KAAAQ,KAAA,UAAAR,KAAA2C,SAAA,WAEAD,QAGA1C,KAAAc,aAAA,WAEAT,OAAA,sBAAAL,KAAAD,KAAA,MAAA6C,gBAEA5C,KAAA4B,IAAA3B,WAAAD,KAAAD,MAEAC,KAAA4B,IAAAzB,aAAA0C,cAAA7C,KAAA8B,QAGA9B,KAAAuB,KAAA,WAEAvB,KAAA6B,gBAAAiB,OAAA9C,KAAAyC,mBAOA,SAAAR,YAAAF,EAAAZ,EAAA4B,GAEA/C,KAAAkB,MAAAa,EACA/B,KAAA+C,gBAAAA,EACA/C,KAAAmB,QAAAA,EACAnB,KAAAgD,sBAAA,KACAhD,KAAAiD,sBAAA,MAEAC,KAAAlD,MAEAmD,cAAA,WAOA,OANAT,OAAA,yJAAA1C,KAAAkB,MAAA,QAEAwB,QAAA,yCAAA1C,KAAAmB,QAAA,SAEAuB,QAAA,SAEAA,QAIA1C,KAAAoD,cAAA,WACA,OAAA/C,OAAA,sBAAAL,KAAA+C,gBAAAhD,KAAA,MAAAsD,SAAA,WAGArD,KAAA2B,WAAA,WACAtB,OAAA,sBAAAL,KAAA+C,gBAAAhD,KAAA,4BAAA6C,SACA5C,KAAA+C,gBAAAnB,IAAAzB,aAAA0C,cAAA7C,MAEAA,KAAA+C,gBAAAX,aAEApC,KAAA+C,gBAAAP,eAEAxC,KAAA+C,gBAAAnB,IAAAzB,aAAAuB,OAAA,IACA1B,KAAA+C,gBAAAnB,IAAA1B,UAAA,IAKAF,KAAAsD,UAAA,WAEAtD,KAAA+C,gBAAAb,WAEAlC,KAAA+C,gBAAAT,aAGAjC,OAAA,sBAAAL,KAAA+C,gBAAAhD,KAAA,MAAA+C,OAAA9C,KAAAmD,iBAGAnD,KAAA+C,gBAAAnB,IAAAzB,aAAAoD,KAAAvD,MAGAA,KAAAwD,iBAIAxD,KAAAyD,YAAA,WAEAzD,KAAAoD,gBAMApD,KAAA2B,aAJA3B,KAAAsD,aAUAtD,KAAAwD,cAAA,WAEAE,oBAAArD,OAAA,sBAAAL,KAAA+C,gBAAAhD,KAAA,MAAA4D,KAAA,yBAAAC,aACAC,qBAAAxD,OAAA,sBAAAL,KAAA+C,gBAAAhD,KAAA,MAAA4D,KAAA,yBAAAG,cAGAJ,oBAAArD,OAAA0D,QAAAH,eACAF,oBAAArD,OAAA0D,QAAAH,aAAA,GAGAI,aAAA3D,OAAA,kBAAAuD,aACAK,cAAA5D,OAAA,kBAAAyD,cAEAI,gBAAA7D,OAAA,sBAAAL,KAAA+C,gBAAAhD,KAAA,MAAA4D,KAAA,yBAEAT,KAAAF,uBAAAU,oBAAA,EAAAM,aAAA,EACAd,KAAAD,sBAAA,IAAAgB,cACAxE,QAAAC,IAAAsE,cACAvE,QAAAC,IAAAuE,eACAxE,QAAAC,IAAAgE,qBAEAQ,gBAAA3B,IAAA,CACA4B,KAAAjB,KAAAF,sBACAoB,IAAAlB,KAAAD,sBACAoB,YAAAhE,OAAA0D,QAAAH,eAQA,WAGA,KAAAM,gBAAAI,SAAAH,KAAA,IAAAD,gBAAAI,SAAAH,KAAAT,oBAAArD,OAAA0D,QAAAH,eACAV,KAAAF,uBAAA,EACAkB,gBAAA3B,IAAA,CACA4B,KAAAjB,KAAAF,sBACAuB,OAAArB,KAAAD,sBACAoB,YAAAhE,OAAA0D,QAAAH,aAAA,IAKA,KAAAM,gBAAAI,SAAAH,KAAAT,oBAAArD,OAAA0D,QAAAH,eAAAM,gBAAAI,SAAAH,KAAA,IACAjB,KAAAF,wBAAA,EACAkB,gBAAA3B,IAAA,CACA4B,KAAAjB,KAAAF,sBACAuB,OAAArB,KAAAD,sBACAoB,YAAAhE,OAAA0D,QAAAH,aAAA,IAKA,KAAAM,gBAAAI,SAAAF,IAAA,GACAlB,KAAAD,wBAAA,EACAiB,gBAAA3B,IAAA,CACA4B,KAAAjB,KAAAF,sBACAuB,OAAArB,KAAAD,sBACAoB,YAAAhE,OAAA0D,QAAAH,aAAA,IAhCAY,IAuDA,SAAAC,aAAAC,GACA,OAAAA,EAAAC,KAAAC,MAAA,IAAAD,KAAAE,SAAA,GAGA,SAAAjE,yBAAAgB,EAAA7B,GAEA,IACA+E,EADAJ,EAAA,YAMAI,OAFA,IAAA/E,EAEAA,EAIA0E,aAAAC,GAMA,IAFA,IAAAK,EAAA,EAEAnD,EAAA3B,WAAA6E,IAMA,GAJAA,EAAAL,aAAAC,GAIA,MAFAK,EAIA,OADAtF,QAAAuF,MAAA,iKACA,EAIA,OAAAF,EAIA,SAAAG,SAAAlF,GAEA,IAAA,IAAA0B,EAAA,EAAAyD,EAAArF,YAAA6B,OAAAD,EAAAyD,EAAAzD,IAEA,GAAA5B,YAAA4B,GAAA1B,MAAAA,EAAA,OAAAF,YAAA4B,GA8EA,SAAA0D,YAAApF,EAAAqF,EAAA9E,GAEA,IAEAoC,EAAA,4EAFA0C,EAEA,4BAEA/E,OAAA,IAAAN,GAAA+C,OAAAJ,GAEAqB,OAAAhE,GAAA,IAAAD,IAAAC,EAAAO,GAEAT,YAAA0D,KAAAQ,OAAAhE,IA3IAsF,MAAAC,UAAAzC,cAAA,SAAA0C,GAEA,IAAAC,EAAAxF,KAAAyF,QAAAF,IACA,EAAAC,GACAxF,KAAA0F,OAAAF,EAAA,IAqDAnF,OAAAsF,UAAAC,MAAA,WAGAvF,OAAA0D,QAAA8B,OAAA,WAEAhG,YAAAiG,QAAA,SAAAlE,GAEAA,EAAAzB,aAAA2F,QAAA,SAAAhE,GAEAA,EAAA0B,sBASAnD,OAAA,QAAA0F,GAAA,QAAA,qBAAA,WAEA,IAAAC,EAAA3F,OAAAL,MAAAiG,SAAAC,KAAA,oBACAC,EAAA9F,OAAAL,MAAAiG,SAAAA,SAAAA,SAAAA,SAAAC,KAAA,MAEA7F,OAAA+F,MAAAC,QAAA,cAAApB,SAAAkB,GAAAlG,WAAA+F,MAKA3F,OAAA,QAAA0F,GAAA,QAAA,sBAAA,SAAAK,GAEAA,EAAAE,kBAEA,IAAAN,EAAA3F,OAAAL,MAAAiG,SAAAA,SAAAC,KAAA,oBACAC,EAAA9F,OAAAL,MAAAiG,SAAAA,SAAAA,SAAAA,SAAAA,SAAAC,KAAA,MAEA7F,OAAA+F,MAAAC,QAAA,cAAApB,SAAAkB,GAAAlG,WAAA+F,MAMA3F,OAAA,QAAA0F,GAAA,QAAA,wBAAA,WAEA,IAAAQ,EAAAlG,OAAAL,MAAAiG,SAAAC,KAAA,oBAGAjB,SAFA5E,OAAAL,MAAAiG,SAAAA,SAAAA,SAAAA,SAAAC,KAAA,OAEAjG,WAAAsG,GAAAjE,eAKAjC,OAAAsF,UAAAI,GAAA,cAAA,SAAAK,EAAArF,GAEAA,EAAAe,MAAA2B,gBAKApD,OAAAsF,UAAAI,GAAA,cAAA,SAAAK,EAAArF,GAEAA,EAAAe,MAAAH","file":"app.min.js","sourcesContent":["console.log('bla appjs');\n$(function () {\n    $('[data-toggle=\"tooltip\"]').tooltip()\n  })\n\n  // array storing all currently added maps;\nvar addedKBmaps = [];\n\nfunction Map(name){\n\n\n\tthis.name = name;\n\tthis.mapMarkers = [];\n\tthis.maxZindex = 2;\n\tthis.openedModals = [];\n\tthis.container =  jQuery(\"#\"+ this.name + \" .KBmap__mapContainer .KBmap__mapHolder\");\n\tthis.mapDataJSON;\n\n\tthis.addMarker = function(icon, cordX, cordY, name){\n\n\t\tvar markerName;\n\n\t\t// if name param is specified use it and check for duplicates in mapMarkers array else generate name\n\t\tif(typeof name !== 'undefined'){\n\n\t\t\tmarkerName = generateUniqueMarkerName(this, name);\n\t\t\n\t\t}else{\n\n\t\t\tmarkerName = generateUniqueMarkerName(this);\n\t\t\n\t\t}\n\n\t\tthis.mapMarkers[markerName] = new MapMarker(markerName, icon, cordX, cordY, this);\n\n\t}\n\n\tthis.removeMarker = function(mapMarker){\n\t\tthis.mapMarkers[mapMarker].removeMarker();\n\t}\n\n\tthis.importJSON = function(mapDataJSON){\n\n\t\tthis.mapDataJSON = mapDataJSON;\n\n\t\tfor (importedMarkerName in this.mapDataJSON){\n\n\t\t\t// add new marker\n\t\t\tthis.addMarker(this.mapDataJSON[importedMarkerName].icon, this.mapDataJSON[importedMarkerName].cordX, this.mapDataJSON[importedMarkerName].cordY, importedMarkerName);\n\n\t\t\t// add modal to new added marker if specified in json\n\t\t\tif (this.mapDataJSON[importedMarkerName][\"modal\"] && this.mapDataJSON[importedMarkerName][\"modal\"].title && this.mapDataJSON[importedMarkerName][\"modal\"].content) {\n;\n\t\t\t\tthis.mapMarkers[importedMarkerName].addModal(this.mapDataJSON[importedMarkerName][\"modal\"].title, this.mapDataJSON[importedMarkerName][\"modal\"].content);\n\t\t\t\t\n\t\t\t};\n\n\t\t}\n\t}\n\n\tthis.generateJSON = function(){\n\t\t// function code here\n\t}\n\n\tthis.showAllMapMarkers = function(){\n\n\t\tvar count = 0;\n\t\t\n\t\tfor (mapMarker in this.mapMarkers){\n\n\t\t\tif (mapMarker != \"removeElement\") {\n\n\t\t\t\tthis.mapMarkers[mapMarker].show();\n\t\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\tthis.closeAllModals = function(){\n\t\tfor (var i = this.openedModals.length-1; i >= 0; i--) {\n\t\t\tthis.openedModals[i].closeModal()\n\t\t};\n\t}\n\n} // Map class end\n\nfunction MapMarker(name, icon, cordX, cordY, map){\n\n\tthis.map = map;\n\tthis.name = name;\n\tthis.icon = icon;\n\tthis.cordX = cordX;\n\tthis.cordY = cordY;\n\tthis.markerContainer = this.map.container; // jquery map marker container object\n\tthis.modal;\n\n\tthis.addModal = function(modalTitle, modalContent){\n\t\tthis.modal = new MarkerModal(modalTitle, modalContent, this);\n\t}\n\t\n\tthis.activate = function(){\n\t\tjQuery('[data-marker-name=\"' + this.name + '\"]').addClass('active');\n\t}\n\n\tthis.deactivate = function(){\n\t\tjQuery('[data-marker-name=\"' + this.name + '\"]').removeClass('active');\n\t}\n\n\tthis.setCurrent = function(){\n\t\tjQuery('[data-marker-name=\"'+ this.name +'\"]').css('z-index', this.map.maxZindex);\n\t\tthis.map.maxZindex++;\n\t}\n\n\tthis.unsetCurrent = function(){\n\t\tjQuery('[data-marker-name=\"'+ this.name +'\"]').css('z-index', \"1\");\n\t}\n\n\tthis.generateMarker = function(){\n\t\toutput = '<div class=\"KBmap__marker\" data-marker-name=\"'+this.name+'\" style=\"left: '+this.cordX+'%; top: '+this.cordY+'%\"><img src=\"'+this.icon+'\" alt=\"'+this.location+'\"></div>'\n\n\t\treturn output;\n\t}\n\n\tthis.removeMarker = function(){\n\n\t\tjQuery('[data-marker-name=\"'+this.name+'\"]').remove();\n\n\t\tdelete this.map.mapMarkers[this.name];\n\n\t\tthis.map.openedModals.removeElement(this.modal);\n\t}\n\n\tthis.show = function(){\n\n\t\tthis.markerContainer.append(this.generateMarker());\n\n\t}\n\n\n} // MapMarker class end\n\nfunction MarkerModal(modalTitle, content, linkedMapMarker){\n\n\tthis.title = modalTitle;\n\tthis.linkedMapMarker = linkedMapMarker; // linked to modal map marker object\n\tthis.content = content;\n\tthis.positionedElemOffsetX = null;\n\tthis.positionedElemOffsetY = null;\n\t\n\tself = this;\n\n\tthis.generateModal = function(){\n\t\toutput = '<div  class=\"KBmap__markerContent\"><div class=\"KBmap__markerClose\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></div><h3 class=\"KBmap__markerTitle\">' + this.title + '</h3>';\n\n\t\toutput += '<div class=\"KBmap__markerContentItem\">' + this.content + '</div>';\n\n\t\toutput += '</div>';\n\n\t\treturn output;\n\n\t}\n\n\tthis.isModalActive = function(){\n\t\treturn (jQuery('[data-marker-name=\"' + this.linkedMapMarker.name + '\"]').hasClass('active'));\n\t}\n\n\tthis.closeModal = function(){\n\t\tjQuery('[data-marker-name=\"'+ this.linkedMapMarker.name +'\"] .KBmap__markerContent').remove();\n\t\tthis.linkedMapMarker.map.openedModals.removeElement(this);\n\n\t\tthis.linkedMapMarker.deactivate();\n\n\t\tthis.linkedMapMarker.unsetCurrent();\n\n\t\tif (this.linkedMapMarker.map.openedModals.length < 1) {\n\t\t\tthis.linkedMapMarker.map.maxZindex = 2;\n\t\t};\n\n\t}\n\n\tthis.openModal = function(){\n\n\t\tthis.linkedMapMarker.activate();\n\n\t\tthis.linkedMapMarker.setCurrent();\n\n\t\t// generate modal and insert it into block with clicked map marker;\n\t\tjQuery('[data-marker-name=\"' + this.linkedMapMarker.name + '\"]').append(this.generateModal());\t\t\n\n\t\t// add currently opened modal to array with all opened modals;\n\t\tthis.linkedMapMarker.map.openedModals.push(this);\t\t\t\t\t\n\n\t\t// center opened modal on map marker (css);\n\t\tthis.clearPosition();\n\n\t}\n\n\tthis.toggleModal = function(){\n\n\t\tif ( ! this.isModalActive() ){\n\n\t\t\tthis.openModal();\n\n\t\t}else{\n\n\t\t\tthis.closeModal();\n\n\t\t}\n\n\t}\n\n\tthis.clearPosition = function(){\n\n\t\t$markerContentWidth = jQuery('[data-marker-name=\"'+ this.linkedMapMarker.name +'\"]').find('.KBmap__markerContent').outerWidth();\n\t\t$markerContentHeight = jQuery('[data-marker-name=\"'+ this.linkedMapMarker.name +'\"]').find('.KBmap__markerContent').outerHeight();\n\n\t\t// if modal content block width is grater than window width set modal with to window width\n\t\tif ($markerContentWidth > jQuery(window).outerWidth()) {\n\t\t\t$markerContentWidth = jQuery(window).outerWidth()-1;\n\t\t}\n\n\t\t$markerWidth = jQuery('.KBmap__marker').outerWidth();\n\t\t$markerHeight = jQuery('.KBmap__marker').outerHeight();\n\n\t\t$positionedElem = jQuery('[data-marker-name=\"'+ this.linkedMapMarker.name +'\"]').find('.KBmap__markerContent');\n\n\t\tself.positionedElemOffsetX = -($markerContentWidth/2)+$markerWidth/2;\n\t\tself.positionedElemOffsetY = $markerHeight*1.5;\n\t\tconsole.log($markerWidth);\n\t\tconsole.log($markerHeight);\n\t\tconsole.log($markerContentWidth);\n\t\t\n\t\t$positionedElem.css({\n\t\t\t'left': self.positionedElemOffsetX,\n\t\t\t'top': self.positionedElemOffsetY,\n\t\t\t'max-width': jQuery(window).outerWidth()\n\t\t});\t\n\n\t\t// if modal is off screen changes its left/right position until modal is fully on screen\n\t\twhileOffScreen();\n\n\t}\n\n\tfunction whileOffScreen(){\n\n\t\t// while is overflowing screen on the left\n\t\twhile (($positionedElem.offset().left < 0)&(!($positionedElem.offset().left + $markerContentWidth > jQuery(window).outerWidth()))) {\n\t\t\tself.positionedElemOffsetX += 1;\n\t\t\t$positionedElem.css({\n\t\t\t\t'left': self.positionedElemOffsetX,\n\t\t\t\t'bottom': self.positionedElemOffsetY,\n\t\t\t\t'max-width': jQuery(window).outerWidth()-1\n\t\t\t});\n\t\t}\n\n\t\t// while is overflowing screen on the rifht\n\t\twhile (($positionedElem.offset().left + $markerContentWidth > jQuery(window).outerWidth())&(!($positionedElem.offset().left < 0))) {\n\t\t\tself.positionedElemOffsetX += -1;\n\t\t\t$positionedElem.css({\n\t\t\t\t'left': self.positionedElemOffsetX,\n\t\t\t\t'bottom': self.positionedElemOffsetY,\n\t\t\t\t'max-width': jQuery(window).outerWidth()-1\n\t\t\t});\n\t\t}\t\n\n\t\t// while is overflowing srceen on top\n\t\twhile($positionedElem.offset().top<0){\n\t\t\tself.positionedElemOffsetY += -1;\n\t\t\t$positionedElem.css({\n\t\t\t\t'left': self.positionedElemOffsetX,\n\t\t\t\t'bottom': self.positionedElemOffsetY,\n\t\t\t\t'max-width': jQuery(window).outerWidth()-1\n\t\t\t});\n\t\t}\n\n\t}\n\n} // MarkerModal class end\n\n/*\n *\n *  Required functionality methods and functions\n *\n */\n\nArray.prototype.removeElement = function(elem){\n\n\tvar index = this.indexOf(elem);\n\tif (index > -1) {\n\t\tthis.splice(index, 1);\n\t}\n\n}\n\nfunction generateName(namebase){\n\treturn namebase+Math.floor((Math.random() * 1000) + 1);\n}\n\nfunction generateUniqueMarkerName(map, name){\n\n\tvar namebase = 'mapMarker';\n\tvar objname;\n\n\t// check if param name is specified, if so use its name and check for duplicates\n\tif(typeof name !== 'undefined'){\n\n\t\tobjname = name;\n\t\n\t}else{\n\n\t\tobjname = generateName(namebase);\n\n\t}\n\n\tvar infiniteLoopCheck = 0;\n\n\twhile (map.mapMarkers[objname]) {\n\n\t\tobjname = generateName(namebase);\n\n\t\tinfiniteLoopCheck++;\n\n\t\tif (infiniteLoopCheck > 1000) {\n\t\t\tconsole.error('After 10000 tries couldnt generate unique name for MapMarker object. Change max number in MapMarker object name [function generateName()]. Default max: 1000');\n\t\t\treturn false;\n\t\t};\n\t}\n\n\treturn objname;\n\n}\n\nfunction getKBmap(name){\n\n\tfor (var i=0, iLen=addedKBmaps.length; i<iLen; i++) {\n\n\t\tif (addedKBmaps[i].name == name) return addedKBmaps[i];\n\n\t}\n\n}\n\njQuery( document ).ready(function() {\n\n\t// on resize chceck if modal is fully on screen, if not change its position\n\tjQuery(window).resize(function(){\n\n\t\taddedKBmaps.forEach(function(map){\n\n\t\t\tmap.openedModals.forEach(function(modal){\n\n\t\t\t\tmodal.clearPosition();\n\n\t\t\t});\n\n\t\t});\n\t\t\n\t});\n\n\t// on map marker click trigger event markerClick (adding new event)\n\tjQuery('body').on('click', '.KBmap__marker img', function(){\n\n\t\tvar clickedMarkerName = jQuery(this).parent().attr('data-marker-name');\n\t\tvar clickedMarkerMapName = jQuery(this).parent().parent().parent().parent().attr('id');\n\n\t\tjQuery.event.trigger('markerClick', getKBmap(clickedMarkerMapName).mapMarkers[clickedMarkerName]);\n\n\t});\n\n\t// on \"x\" click in modal block close modal\n\tjQuery('body').on('click', '.KBmap__markerClose', function(event){\n\n\t\tevent.stopPropagation();\n\n\t\tvar clickedMarkerName = jQuery(this).parent().parent().attr('data-marker-name');\n\t\tvar clickedMarkerMapName = jQuery(this).parent().parent().parent().parent().parent().attr('id');\n\n\t\tjQuery.event.trigger('markerClose', getKBmap(clickedMarkerMapName).mapMarkers[clickedMarkerName]);\n\n\t});\n\n\t// on modal body click add current class to it and remove that class from all other opened modals \n\t// (current modal is always on top of others)\n\tjQuery('body').on('click', '.KBmap__markerContent', function(){\n\n\t\tvar mapMarkerParent = jQuery(this).parent().attr('data-marker-name');\n\t\tvar mapMarkerMapParent= jQuery(this).parent().parent().parent().parent().attr('id');\n\n\t\tgetKBmap(mapMarkerMapParent).mapMarkers[mapMarkerParent].setCurrent()\n\n\t});\n\n\t// on markerClick event run function that opens linked modal\n\tjQuery(document).on('markerClick', function(event, mapMarker){\n\n\t\tmapMarker.modal.toggleModal();\n\n\t});\n\n\t// on markerClose event\n\tjQuery(document).on('markerClose', function(event, mapMarker){\n\n\t\tmapMarker.modal.closeModal();\n\n\t});\n\n}); // document ready end\n\n/*\n *\n *  // Required functionality methods and functions end\n *\n */\n\nfunction createKBmap(name, mapsrc, mapDataJSON){\n\n\tvar mapImg = mapsrc;\n\n\tvar output = '<div class=\"KBmap__mapContainer\"><div class=\"KBmap__mapHolder\"><img src=\"' + mapImg + '\" alt=\"mapa\"></div></div>';\n\n\tjQuery('#'+name).append(output);\n\n\twindow[name] = new Map(name, mapDataJSON);\n\n\taddedKBmaps.push(window[name]);\n\n}\n\n"]}